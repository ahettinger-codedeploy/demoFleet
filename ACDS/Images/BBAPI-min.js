var BLACKBAUD=BLACKBAUD||{};BLACKBAUD.api={};(function(){BLACKBAUD.api.querystring={getQueryStringValue:function(a,c){var d,b;if(!c){c=window.location.search}c=c.toLowerCase();d=new RegExp("[?|&]"+a+"=(.*?)&");b=d.exec(c+"&");if(!b||b.length<2){return""}return decodeURIComponent(b[1].replace("+"," "))}};BLACKBAUD.api.pageInformation={rootPath:"",pageId:""};(function(){function a(b,e,d,c){if(e==="success"){if(d){d($.parseJSON(b.responseText))}}else{if(b.status===400){if(c){c($.parseJSON(b.responseText))}}else{if(c){c()}}}}BLACKBAUD.api.CountryService=function(b){if(!b){b=BLACKBAUD.api.pageInformation.rootPath}this.baseUrl=b+"WebApi"};BLACKBAUD.api.CountryService.prototype={getCountries:function(c,b){var d=this.baseUrl+"/Country";$.ajax({url:d,type:"GET",complete:function(e,f){a(e,f,c,b)}})},getStates:function(b,d,c){var e=this.baseUrl+"/Country/"+b+"/State";$.ajax({url:e,type:"GET",complete:function(f,g){a(f,g,d,c)}})}}}())}());
(function(){var b,h,c;b=500;function a(k,j){var i="BBElementBlock";if(!k){k="Processing..."}if(j){i+=" BBPageBlock"}return{message:"<div class='"+i+"'><span>"+k+"</span></div>",overlayCSS:{backgroundColor:"#CCCCCC"}}}c=[];function d(i){if(i){if(typeof i==="string"){return document.getElementById(i)}else{if(i instanceof $){return i[0]}}return i.dom||i}return null}function g(j){var k,l;k=c.length;while(k--){l=c[k];if(l.el===j){return l}}}function f(i){var j;j={el:i,waitCount:0};c.push(j);return j}function e(k){var j;j=c.length;while(j--){if(k===c[j]){c.splice(j,1);break}}}BLACKBAUD.api.blockElement=function(i,m,j){var k,l;$.blockUI.defaults.css={};if(j===false||j===0){j=0}else{j=j||b}i=d(i);l=g(i);if(!l){l=f(i);if(i){k=setTimeout(function(){$(i).block(a(m,false))},j)}else{k=setTimeout(function(){$.blockUI(a(m,true))},j)}l.delayHandle=k}l.waitCount++};BLACKBAUD.api.unblockElement=function(i){var j,k;i=d(i);k=g(i);if(k){k.waitCount--;if(k.waitCount===0){j=k.delayHandle;if(j){clearTimeout(j);k.delayHandle=null}if(i){$(i).unblock()}else{$.unblockUI()}e(k)}}}})();
(function(){function a(c){return c.baseUrl+"WebApi/"+c.contextId+"/Donation"}function b(c,f,e,d){if(f==="success"){if(e){e($.parseJSON(c.responseText))}}else{if(c.status===400){if(d){d($.parseJSON(c.responseText))}}else{if(d){d()}}}}BLACKBAUD.api.DonationService=function(d,c){if(!c){c=BLACKBAUD.api.pageInformation.rootPath}this.contextId=d;this.baseUrl=c};BLACKBAUD.api.DonationService.prototype={createDonation:function(g,e,d){var f=a(this)+"/Create";function c(h){e(h);if(h.BBSPCheckoutUri){location.href=h.BBSPCheckoutUri}}$.ajax({url:f,type:"POST",data:JSON.stringify(g),contentType:"application/json",complete:function(h,i){b(h,i,c,d)}})},getDonation:function(f,d,c){var e=a(this)+"/"+f;$.ajax({url:e,type:"GET",complete:function(g,h){b(g,h,d,c)}})},completeBBSPDonation:function(f,d,c){var e=a(this)+"/"+f+"/CompleteBBSPDonation";$.ajax({url:e,type:"POST",complete:function(g,h){b(g,h,d,c)}})},getDonationConfirmationHtml:function(f,d,c){var e=a(this)+"/"+f+"/ConfirmationHtml";$.ajax({url:e,type:"GET",complete:function(g,h){b(g,h,d,c)}})}}}());
