(function(){AO.models.ThemeColor=Backbone.Model.extend({defaults:{color:null,template_id:null}}),AO.views.ColorThemesEditor=Backbone.View.extend({events:{"click .ao-color-theme-link":"show","click .ao-color-theme-save":"save"},initialize:function(){this.themes=null,AO.tpls[AO.tplId-1].themes!=void 0&&(this.themes=AO.tpls[AO.tplId-1].themes),this.color=null,this.template_id=AO.tplId,this.model=new AO.models.ThemeColor({color:this.color,template_id:this.template_id}),this.render()},render:function(){var t=_.template(this.tpl(),{});this.$el.append(t),this.savebtn=this.$el.find(".ao-color-theme-save")},show:function(t){var e=$(t.currentTarget),n=e.attr("data-color"),i=$(document.body).attr("data-color");$(document.body).removeClass("style-"+i).addClass("style-"+n).attr("data-color",n),this.savebtn.removeClass("hidden"),this.color=n},tpl:function(){var t=0,e=0,n="";for(this.themes&&(e=this.themes.length),t=0;e>t;t++)n+="<div data-color='"+this.themes[t]+"' class=\"ao-color-theme-"+this.themes[t]+' ao-color-theme-link"></div>';return e>0&&(n+="<div><input class='ao-color-theme-save hidden' type='button' value='Save' /></div>"),n},save:function(){console.log("save color theme");var t=this;this.savebtn.addClass("hidden"),this.model.set("color",this.color),this.model.save(null,{url:"onepage/configures/save_theme",success:function(){t.savebtn.addClass("hidden"),AO.core.events.trigger("notify:alert","saved",function(){console.log("saved")})},error:function(){}})}})})();