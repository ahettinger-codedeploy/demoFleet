(function(){AO.views.TopPageLink=Backbone.View.extend({events:{"focus .ao-select-top-link":"refresh","change .ao-select-top-link":"change","click .ao-select-top-link-save":"save"},initialize:function(){this.render()},render:function(){var t=_.template("<div class='ao-select-top-link-wrap'><select class='ao-select-top-link'><option value='none'>None</option><option value='hide'>Hide</option></select><input class='ao-select-top-link-save' style='display:none;' type='button' value='Save'/></div>",{});return this.$el.append(t),this.select=this.$el.find(".ao-select-top-link"),this.savebtn=this.$el.find(".ao-select-top-link-save"),this},refresh:function(){var t="<option value='none'>None</option>";$("#top_menu_navbar li.page-scroll:visible a").each(function(){t+="<option value='"+$(this).attr("href")+"'>"+$(this).html()+"</option>"}),t+="<option value='hide'>Hide</option>",this.select.html(t)},change:function(){this.savebtn.show()},save:function(){var t=this.select.val();this.$el.find(".ao-intro-link").attr("href",t),this.model.set("value",t),this.model._save(function(){AO.core.events.trigger("message:notify","success","Success: ","Saved")},function(){AO.core.events.trigger("message:notify","danger","Error: ","Reload page and try again.")}),"none"==t||"hide"==t?this.$el.find(".btn-circle").addClass("hidden"):this.$el.find(".btn-circle").removeClass("hidden"),this.savebtn.hide()}})})();