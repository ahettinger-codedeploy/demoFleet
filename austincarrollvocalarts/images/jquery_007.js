(function(t){function e(){function e(t){"remove"===t&&this.each(function(t,e){var i=a(e);i&&i.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(t,e){var i=tinyMCE.get(e.id.replace(/_parent$/,""));i&&i.remove()})}function s(t){var s,a=this;if(t!==i)e.call(a),a.each(function(e,i){var s;(s=tinyMCE.get(i.id))&&s.setContent(t)});else if(a.length>0&&(s=tinyMCE.get(a[0].id)))return s.getContent()}function a(t){var e=null;return t&&t.id&&n.tinymce&&(e=tinyMCE.get(t.id)),e}function o(t){return!!(t&&t.length&&n.tinymce&&t.is(":tinymce"))}var r={};t.each(["text","html","val"],function(e,n){var l=r[n]=t.fn[n],h="text"===n;t.fn[n]=function(e){var n=this;if(!o(n))return l.apply(n,arguments);if(e!==i)return s.call(n.filter(":tinymce"),e),l.apply(n.not(":tinymce"),arguments),n;var r="",c=arguments;return(h?n:n.eq(0)).each(function(e,i){var s=a(i);r+=s?h?s.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):s.getContent({save:!0}):l.apply(t(i),c)}),r}}),t.each(["append","prepend"],function(e,s){var n=r[s]=t.fn[s],l="prepend"===s;t.fn[s]=function(t){var e=this;return o(e)?t!==i?(e.filter(":tinymce").each(function(e,i){var s=a(i);s&&s.setContent(l?t+s.getContent():s.getContent()+t)}),n.apply(e.not(":tinymce"),arguments),e):void 0:n.apply(e,arguments)}}),t.each(["remove","replaceWith","replaceAll","empty"],function(i,s){var a=r[s]=t.fn[s];t.fn[s]=function(){return e.call(this,s),a.apply(this,arguments)}}),r.attr=t.fn.attr,t.fn.attr=function(e,n){var l=this,h=arguments;if(!e||"value"!==e||!o(l))return n!==i?r.attr.apply(l,h):r.attr.apply(l,h);if(n!==i)return s.call(l.filter(":tinymce"),n),r.attr.apply(l.not(":tinymce"),h),l;var c=l[0],u=a(c);return u?u.getContent({save:!0}):r.attr.apply(t(c),h)}}var i,s,a=[],n=window;t.fn.tinymce=function(i){function o(){var s=[],a=0;e&&(e(),e=null),u.each(function(t,e){var n,o=e.id,r=i.oninit;o||(e.id=o=tinymce.DOM.uniqueId()),n=new tinymce.Editor(o,i),s.push(n),n.onInit.add(function(){var t,e=r;u.css("visibility",""),r&&++a==s.length&&(tinymce.is(e,"string")&&(t=e.indexOf(".")===-1?null:tinymce.resolve(e.replace(/\.\w+$/,"")),e=tinymce.resolve(e)),e.apply(t||tinymce,s))})}),t.each(s,function(t,e){e.render()})}var r,l,h,c,u=this,d="",p="";return u.length?i?(u.css("visibility","hidden"),n.tinymce||s||!(r=i.script_url)?1===s?a.push(o):o():(s=1,l=r.substring(0,r.lastIndexOf("/")),/_(src|dev)\.js/g.test(r)&&(p="_src"),h=r.lastIndexOf("?"),-1!=h&&(d=r.substring(h+1)),n.tinyMCEPreInit=n.tinyMCEPreInit||{base:l,suffix:p,query:d},r.indexOf("gzip")!=-1&&(c=i.language||"en",r=r+(/\?/.test(r)?"&":"?")+"js=true&core=true&suffix="+escape(p)+"&themes="+escape(i.theme)+"&plugins="+escape(i.plugins)+"&languages="+c,n.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function e(t){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(t))}tinymce.suffix=p,e("langs/"+c+".js"),e("themes/"+i.theme+"/editor_template"+p+".js"),e("themes/"+i.theme+"/langs/"+c+".js"),t.each(i.plugins.split(","),function(t,i){i&&(e("plugins/"+i+"/editor_plugin"+p+".js"),e("plugins/"+i+"/langs/"+c+".js"))})},end:function(){}})),t.ajax({type:"GET",url:r,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,s=2,i.script_loaded&&i.script_loaded(),o(),t.each(a,function(t,e){e()})}})),u):tinyMCE.get(u[0].id):u},t.extend(t.expr[":"],{tinymce:function(t){return!!(t.id&&"tinyMCE"in window&&tinyMCE.get(t.id))}})})(jQuery);