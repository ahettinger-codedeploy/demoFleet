(function(){AO.views.ContactMessageForm=Backbone.View.extend({events:{submit:"submit"},initialize:function(){this.name=this.$el.find(".contact-name"),this.email=this.$el.find(".contact-email"),this.number=this.$el.find(".contact-number"),this.message=this.$el.find(".contact-message"),this.contact_id=this.$el.find("#request_contact_id"),this.name_error=this.$el.find(".contact-name-error"),this.email_error=this.$el.find(".contact-email-error"),this.number_error=this.$el.find(".contact-number-error"),this.message_error=this.$el.find(".contact-message-error"),this.submitBtn=this.$el.find(".ao-contact-submit"),this.sendLoader=this.$el.find(".ao-contact-send-loader")},showLoader:function(){this.submitBtn.hide(),this.sendLoader.show()},hideLoader:function(){this.submitBtn.show(),this.sendLoader.hide()},submit:function(){var t=!0,e=this,i=this.name.val(),s=this.email.val(),n=this.number.val(),a=this.message.val();""==i&&(t=!1,this.name_error.html("Please enter your name")),""==a&&(t=!1,this.message_error.html("Please enter messeage"));var o=/^(\w+[\-\.])*\w+@(\w+\.)+[A-Za-z]+$/;return o.test(s)||(t=!1,this.email_error.html("You must enter a valid email address")),t||setTimeout(function(){e.name_error.empty(),e.email_error.empty(),e.number_error.empty(),e.message_error.empty()},5e3),t&&(this.showLoader(),$.ajax({type:"POST",url:"/epk/contact",data:{name:i,phone:n,email:s,comment:a,contact_id:e.contact_id.val()},dataType:"html",success:function(t){e.name.val(""),e.email.val(""),e.number.val(""),e.message.val(""),setTimeout(function(){e.name_error.empty(),e.email_error.empty(),e.number_error.empty(),e.message_error.empty()},5e3),e.$el.find(".ao-contact-sent-response").html(t),setTimeout(function(){e.$el.find(".ao-contact-sent-response").empty()},1e4),e.hideLoader()},error:function(){e.hideLoader()}})),!1}}),AO.views.pages.Contact=Backbone.View.extend({initialize:function(){this.contact_form=new AO.views.ContactMessageForm({el:this.$el.find(".contact-form")})}})})();